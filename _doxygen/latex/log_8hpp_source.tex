\doxysection{log.\+hpp}
\hypertarget{log_8hpp_source}{}\label{log_8hpp_source}\index{liblava/util/log.hpp@{liblava/util/log.hpp}}
\mbox{\hyperlink{log_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{version_8hpp}{liblava/core/version.hpp}}"{}}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ "{}spdlog/sinks/basic\_file\_sink.h"{}}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ "{}spdlog/sinks/stdout\_color\_sinks.h"{}}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ "{}spdlog/spdlog.h"{}}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{keyword}{namespace\ }lava\ \{}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00019\ \textcolor{keyword}{using\ }\mbox{\hyperlink{log_8hpp_a7b6c44303d3171ad98904b82bed1e31c}{s\_logger}}\ =\ std::shared\_ptr<spdlog::logger>;}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00027\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{string}\ \mbox{\hyperlink{base_2base_8hpp_a7f77a3e2fd6478b5d5c013607ec5bd8b}{to\_string}}(\mbox{\hyperlink{types_8hpp_a01c2a7bfa24e7ea76ef5a79d8d4daaf6}{string\_ref}}\ \textcolor{keywordtype}{id},\ \mbox{\hyperlink{types_8hpp_a01c2a7bfa24e7ea76ef5a79d8d4daaf6}{string\_ref}}\ \mbox{\hyperlink{types_8hpp_a6ac8e87ce8d5b170084592abbef3b8c9}{name}})\ \{}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keywordflow}{return}\ fmt::format(\textcolor{stringliteral}{"{}\{\}\ |\ \{\}"{}},\ \textcolor{keywordtype}{id},\ \mbox{\hyperlink{types_8hpp_a6ac8e87ce8d5b170084592abbef3b8c9}{name}});}
\DoxyCodeLine{00029\ \}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00036\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{string}\ \mbox{\hyperlink{base_2base_8hpp_a7f77a3e2fd6478b5d5c013607ec5bd8b}{to\_string}}(\mbox{\hyperlink{structlava_1_1semantic__version}{sem\_version}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{structlava_1_1version}{version}})\ \{}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordflow}{return}\ fmt::format(\textcolor{stringliteral}{"{}\{\}.\{\}.\{\}"{}},}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structlava_1_1version}{version}}.major,}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structlava_1_1version}{version}}.minor,}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structlava_1_1version}{version}}.patch);}
\DoxyCodeLine{00041\ \}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00047\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{string}\ \mbox{\hyperlink{log_8hpp_a1e63caa365cd3250553ab7454c81049b}{semantic\_version\_string}}()\ \{}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{base_2base_8hpp_a7f77a3e2fd6478b5d5c013607ec5bd8b}{to\_string}}(\mbox{\hyperlink{structlava_1_1semantic__version}{sem\_version}}\{\});}
\DoxyCodeLine{00049\ \}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00054\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{string}\ \mbox{\hyperlink{log_8hpp_ad0b162fbb13cc0d41cdd3770dee314f0}{sem\_version\_string}}()\ \{}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{log_8hpp_a1e63caa365cd3250553ab7454c81049b}{semantic\_version\_string}}();}
\DoxyCodeLine{00056\ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00063\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{types_8hpp_a6ac8e87ce8d5b170084592abbef3b8c9}{name}}\ \mbox{\hyperlink{base_2base_8hpp_a7f77a3e2fd6478b5d5c013607ec5bd8b}{to\_string}}(\mbox{\hyperlink{version_8hpp_a592fe41d299f08f625229ef52f7fe331}{version\_stage}}\ \mbox{\hyperlink{structlava_1_1stage}{stage}})\ \{}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keywordflow}{switch}\ (\mbox{\hyperlink{structlava_1_1stage}{stage}})\ \{}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordflow}{case}\ version\_stage::preview:}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}preview"{}};}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordflow}{case}\ version\_stage::alpha:}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}alpha"{}};}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordflow}{case}\ version\_stage::beta:}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}beta"{}};}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordflow}{case}\ version\_stage::rc:}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}rc"{}};}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00075\ \ \ \ \ \}}
\DoxyCodeLine{00076\ \}}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00083\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{string}\ \mbox{\hyperlink{base_2base_8hpp_a7f77a3e2fd6478b5d5c013607ec5bd8b}{to\_string}}(\mbox{\hyperlink{structlava_1_1version}{version}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{structlava_1_1version}{version}})\ \{}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keywordtype}{string}\ stage\_str\ =\ \mbox{\hyperlink{base_2base_8hpp_a7f77a3e2fd6478b5d5c013607ec5bd8b}{to\_string}}(\mbox{\hyperlink{structlava_1_1version}{version}}.\mbox{\hyperlink{structlava_1_1version_a13275affeb3eab2a3ebaba8d83963c96}{stage}});}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{structlava_1_1version}{version}}.\mbox{\hyperlink{structlava_1_1version_a817115e00a7f27e48fdcbfd7ba8d83e1}{rev}}\ >\ 1)\ \&\&\ (\mbox{\hyperlink{structlava_1_1version}{version}}.\mbox{\hyperlink{structlava_1_1version_a13275affeb3eab2a3ebaba8d83963c96}{stage}}\ !=\ version\_stage::release))}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ stage\_str\ +=\ fmt::format(\textcolor{stringliteral}{"{}\ \{\}"{}},\ \mbox{\hyperlink{structlava_1_1version}{version}}.\mbox{\hyperlink{structlava_1_1version_a817115e00a7f27e48fdcbfd7ba8d83e1}{rev}});}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structlava_1_1version}{version}}.\mbox{\hyperlink{structlava_1_1version_a6e395fd7887aae1d7b1f85186a2b0239}{release}}\ ==\ 0)\ \{}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (stage\_str.empty())}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ fmt::format(\textcolor{stringliteral}{"{}\{\}"{}},\ \mbox{\hyperlink{structlava_1_1version}{version}}.\mbox{\hyperlink{structlava_1_1version_a6a95b2aa49453a7aef7434a289eff893}{year}});}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ fmt::format(\textcolor{stringliteral}{"{}\{\}\ \{\}"{}},}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structlava_1_1version}{version}}.\mbox{\hyperlink{structlava_1_1version_a6a95b2aa49453a7aef7434a289eff893}{year}},\ stage\_str);}
\DoxyCodeLine{00094\ \ \ \ \ \}\ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ fmt::format(\textcolor{stringliteral}{"{}\{\}.\{\}\ \{\}"{}},}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structlava_1_1version}{version}}.\mbox{\hyperlink{structlava_1_1version_a6a95b2aa49453a7aef7434a289eff893}{year}},\ \mbox{\hyperlink{structlava_1_1version}{version}}.\mbox{\hyperlink{structlava_1_1version_a6e395fd7887aae1d7b1f85186a2b0239}{release}},\ stage\_str);}
\DoxyCodeLine{00097\ \}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00103\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{string}\ \mbox{\hyperlink{log_8hpp_a24f4d3b66a3cd12bc3ff3a57228764d6}{version\_string}}()\ \{}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{base_2base_8hpp_a7f77a3e2fd6478b5d5c013607ec5bd8b}{to\_string}}(\mbox{\hyperlink{structlava_1_1version}{version}}\{\});}
\DoxyCodeLine{00105\ \}}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \textcolor{keyword}{namespace\ }log\ \{}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structlava_1_1log_1_1config}{config}}\ \{}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{types_8hpp_a6ac8e87ce8d5b170084592abbef3b8c9}{name}}\ \mbox{\hyperlink{structlava_1_1log_1_1config_ae64ecf4aa7602d399ab6794d60825cdb}{logger}}\ =\ \mbox{\hyperlink{types_8hpp_aa6f0dfe4257894c2b7439582eeea0bec}{\_lava\_}};}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{types_8hpp_a6ac8e87ce8d5b170084592abbef3b8c9}{name}}\ \mbox{\hyperlink{structlava_1_1file}{file}}\ =\ \textcolor{stringliteral}{"{}lava.log"{}};}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{types_8hpp_a7e5d7f16aff5126a54243302372b43b1}{i32}}\ \mbox{\hyperlink{structlava_1_1log_1_1config_ae2419bcffd31d5dcf102636bfc109c1a}{level}}\ =\ \mbox{\hyperlink{types_8hpp_a276426bd2813c3fc0cb1c6bf20a8cbae}{undef}};}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structlava_1_1log_1_1config_a76b4bc49bc5ed2cf9ca0a45fc06157d3}{debug}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00124\ \ \ \ \ \};}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{log_8hpp_a7b6c44303d3171ad98904b82bed1e31c}{s\_logger}}\ \mbox{\hyperlink{log_8hpp_a25e633069683662327aa1a0191a16aac}{setup}}(\mbox{\hyperlink{structlava_1_1log_1_1config}{config}}\ \mbox{\hyperlink{structlava_1_1log_1_1config}{config}}\ =\ \{\})\ \{}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (config.debug)\ \{}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ log\ =\ spdlog::stdout\_color\_mt(config.logger);}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ log-\/>set\_level((config.level\ <\ 0)}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ?\ spdlog::level::debug}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ (spdlog::level::level\_enum)config.level);}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ log;}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ log\ =\ spdlog::basic\_logger\_mt(config.logger,\ config.file);}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ log-\/>set\_level((config.level\ <\ 0)}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ?\ spdlog::level::warn}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ (spdlog::level::level\_enum)config.level);}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ log;}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00145\ \ \ \ \ \}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{log_8hpp_a4a1844c39cdc4874a66f1a2857ae4e3c}{teardown}}(\mbox{\hyperlink{structlava_1_1log_1_1config}{config}}\ \mbox{\hyperlink{structlava_1_1log_1_1config}{config}}\ =\ \{\})\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ spdlog::drop(config.logger);}
\DoxyCodeLine{00153\ \ \ \ \ \}}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \}\ \textcolor{comment}{//\ namespace\ log}}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00160\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structlava_1_1global__logger}{global\_logger}}\ \{}
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{structlava_1_1global__logger}{global\_logger}}\&\ \mbox{\hyperlink{structlava_1_1global__logger_af8d156d01533ef0140fce79a27421c6f}{singleton}}()\ \{}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{structlava_1_1global__logger}{global\_logger}}\ \mbox{\hyperlink{structlava_1_1global__logger}{global\_logger}};}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structlava_1_1global__logger}{global\_logger}};}
\DoxyCodeLine{00168\ \ \ \ \ \}}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00174\ \ \ \ \ \mbox{\hyperlink{log_8hpp_a7b6c44303d3171ad98904b82bed1e31c}{s\_logger}}\ \mbox{\hyperlink{structlava_1_1global__logger_a5f86ea15f4aa7f6592646e383c518c38}{get}}()\ \{}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_logger;}
\DoxyCodeLine{00176\ \ \ \ \ \}}
\DoxyCodeLine{00177\ }
\DoxyCodeLine{00182\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structlava_1_1global__logger_a755b417a7fe15cc8c36a52b293946bf7}{set}}(\mbox{\hyperlink{log_8hpp_a7b6c44303d3171ad98904b82bed1e31c}{lava::s\_logger}}\ l)\ \{}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ m\_logger\ =\ l;}
\DoxyCodeLine{00184\ \ \ \ \ \}}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structlava_1_1global__logger_a0b0815f56c6589a45b51cd2d254080b5}{reset}}()\ \{}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ m\_logger\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00191\ \ \ \ \ \}}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00193\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00195\ \ \ \ \ \mbox{\hyperlink{log_8hpp_a7b6c44303d3171ad98904b82bed1e31c}{s\_logger}}\ m\_logger;}
\DoxyCodeLine{00196\ \};}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00202\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{log_8hpp_a7b6c44303d3171ad98904b82bed1e31c}{s\_logger}}\ \mbox{\hyperlink{log_8hpp_a10ae1b412d16ce204d8bc594ae6a171f}{logger}}()\ \{}
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structlava_1_1global__logger_af8d156d01533ef0140fce79a27421c6f}{global\_logger::singleton}}().\mbox{\hyperlink{structlava_1_1global__logger_a5f86ea15f4aa7f6592646e383c518c38}{get}}();}
\DoxyCodeLine{00204\ \}}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \}\ \textcolor{comment}{//\ namespace\ lava}}

\end{DoxyCode}
